{% extends 'reviews/base.html' %}

{% block title %}Review Detail{% endblock %}

{% block content %}
  <div class="review-detail">
    <div class="review-detail-header">
      <h2 class="review-detail-title">Review by {{ review.user_name }}</h2>
      {% if is_favorite %}
        <!-- Heart icon top right -->
        <span class="favorite-heart">❤️</span>
      {% endif %}
    </div>

    <!-- Rating number + stars -->
    <div class="review-detail-rating">
      <span class="rating-number">{{ review.rating }}/5</span>
      <span class="review-stars">
        {% for i in "12345"|make_list %}
          {% if forloop.counter <= review.rating %}
            <span class="star filled">★</span>
          {% else %}
            <span class="star">☆</span>
          {% endif %}
        {% endfor %}
      </span>
    </div>

    <!-- Review text -->
    <p class="review-detail-text">{{ review.review_text }}</p>

    <!-- Show button only if not favorite -->
    {% if not is_favorite %}
      <form method="post" action="{% url 'add_favorite' %}">
        {% csrf_token %}
        <input type="hidden" name="review_id" value="{{ review.id }}">
        <button class="favorite-btn">
          ❤️ Add to Favorites
        </button>
      </form>
    {% endif %}

    <!-- Back link -->
    <a href="{% url 'review_list' %}" class="back-link">← Back to all reviews</a>
  </div>
{% endblock %}
